<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Physics Test</title>
		<style>
			body {
				background: #222;
				color: #eee;
				text-align: center;
			}
			canvas {
				background: #111;
				display: block;
				margin: 20px auto;
			}
		</style>
	</head>
	<body>
		<h1>Pen Fight Physics Test</h1>
		<canvas id="gameCanvas" width="800" height="600"></canvas>

		<!-- Import your physics engine -->
		<script src="scripts/physics/physics.js"></script>
		<script>
			const canvas = document.getElementById("gameCanvas");
			const ctx = canvas.getContext("2d");

			// Create two rigid bodies
			const pen1 = new RigidBody(300, 300, 150, 20, 1);
			const pen2 = new RigidBody(500, 350, 150, 20, 1);

			pen1.vx = 50; // give pen1 some velocity
			pen1.vy = 20; // give pen1 some velocity
			pen2.angle = 0.5; // rotate pen2 a bit

			function drawBody(body, color = "cyan") {
				const verts = body.getVertices();
				ctx.beginPath();
				ctx.moveTo(verts[0].x, verts[0].y);
				for (let i = 1; i < verts.length; i++) {
					ctx.lineTo(verts[i].x, verts[i].y);
				}
				ctx.closePath();
				ctx.strokeStyle = color;
				ctx.stroke();
			}

			let lastTime = performance.now();
			function loop(time) {
				const dt = (time - lastTime) / 1000;
				lastTime = time;

				ctx.clearRect(0, 0, canvas.width, canvas.height);

				// Physics step
				pen1.integrateForces(dt);
				pen2.integrateForces(dt);
				pen1.update(dt);
				pen2.update(dt);

				// Collision test
				const hit = resolveCollision(pen1.getVertices(), pen2.getVertices());

				// Draw
				drawBody(pen1, hit ? "red" : "cyan");
				drawBody(pen2, hit ? "red" : "lime");

				requestAnimationFrame(loop);
			}

			loop(lastTime);
		</script>
	</body>
</html>
